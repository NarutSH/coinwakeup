{"ast":null,"code":"import _objectSpread from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useForm,useFieldArray,Controller,useWatch}from\"react-hook-form\";import{FaTimesCircle}from\"react-icons/fa\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Table=function Table(_ref){var _ref2,_quoteSummary$incomeS,_ref3,_quoteSummary$balance,_quoteSummary$incomeS2,_quoteSummary$incomeS3,_quoteSummary$incomeS4,_quoteSummary$incomeS5;var quoteSummary=_ref.quoteSummary;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),growth=_useState2[0],setGrowth=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),npm=_useState4[0],setNpm=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalShares=_useState6[0],setTotalShares=_useState6[1];var incomeStatementHistory=quoteSummary?(_ref2=_toConsumableArray(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS===void 0?void 0:_quoteSummary$incomeS.incomeStatementHistory))===null||_ref2===void 0?void 0:_ref2.reverse():[];var balanceSheetStatements=quoteSummary?(_ref3=_toConsumableArray(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$balance=quoteSummary.balanceSheetHistory)===null||_quoteSummary$balance===void 0?void 0:_quoteSummary$balance.balanceSheetStatements))===null||_ref3===void 0?void 0:_ref3.reverse():[];var revenue=(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS2=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS2===void 0?void 0:(_quoteSummary$incomeS3=_quoteSummary$incomeS2.incomeStatementHistory[0])===null||_quoteSummary$incomeS3===void 0?void 0:_quoteSummary$incomeS3.totalRevenue.raw)+(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS4=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS4===void 0?void 0:(_quoteSummary$incomeS5=_quoteSummary$incomeS4.incomeStatementHistory[0])===null||_quoteSummary$incomeS5===void 0?void 0:_quoteSummary$incomeS5.totalRevenue.raw)*(growth/100);var styles={tableHeader:{backgroundColor:\"rgba(227, 242, 253, 1)\"}};var defaultValues={predict:[{revenueEl:revenue,growthRevEl:0,pNpmEl:0,npmEl:0,totalSharesEl:0,epsEl:0}]};var _useForm=useForm(),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,watch=_useForm.watch,setValue=_useForm.setValue,getValues=_useForm.getValues;var _useFieldArray=useFieldArray({control:control,name:\"predict\"}),fields=_useFieldArray.fields,append=_useFieldArray.append,prepend=_useFieldArray.prepend,remove=_useFieldArray.remove,swap=_useFieldArray.swap,move=_useFieldArray.move,insert=_useFieldArray.insert,replace=_useFieldArray.replace;var lastRev=watch(\"predict.\".concat(fields.length-1,\".revenueEl\"));var lastGrowth=watch(\"predict.\".concat(fields.length-1,\".growthRevEl\"));useEffect(function(){if(quoteSummary)reset(defaultValues);},[quoteSummary]);var formatNumber=function formatNumber(data){return(Math.round(data/1000000*100)/100).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");};var displayTable2=/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",overflowX:\"scroll\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table \",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-center\",style:styles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{children:new Date(item.endDate.raw*1000).getFullYear()},item.endDate.raw);}):\"-\",fields.map(function(item,index){return/*#__PURE__*/_jsxs(\"td\",{children:[new Date().getFullYear()+index,\" \",index!==0?/*#__PURE__*/_jsx(\"span\",{className:\"float-end\",style:{cursor:\"pointer\"},onClick:function onClick(){return remove(index);},children:/*#__PURE__*/_jsx(FaTimesCircle,{})}):\"\"]});}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{type:\"button\",className:\"btn btn-outline-primary btn-sm\",onClick:function onClick(){append({revenueEl:lastRev+lastRev*(lastGrowth/100),growthRevEl:0,pNpmEl:0,npmEl:0,totalSharesEl:0,epsEl:0});},children:\"+\"})})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E23\\u0E32\\u0E22\\u0E44\\u0E14\\u0E49 (\\u0E25\\u0E1A.)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(item.totalRevenue.raw)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:formatNumber(rev+rev*(growth/100))})});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E32\\u0E23\\u0E40\\u0E15\\u0E34\\u0E1A\\u0E42\\u0E15\\u0E02\\u0E2D\\u0E07\\u0E23\\u0E32\\u0E22\\u0E44\\u0E14\\u0E49 (%)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){var revGrowth;if(index!==0){var _incomeStatementHisto;revGrowth=\"\\n                        \".concat(Math.round(((item===null||item===void 0?void 0:item.totalRevenue.raw)/((_incomeStatementHisto=incomeStatementHistory[index-1])===null||_incomeStatementHisto===void 0?void 0:_incomeStatementHisto.totalRevenue.raw)-1)*100*100)/100);}else{revGrowth=\"-\";}return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:revGrowth});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".growthRevEl\"))),{},{className:\"text-center form-control m-auto\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E2D\\u0E31\\u0E15\\u0E23\\u0E32\\u0E01\\u0E33\\u0E44\\u0E23\\u0E2A\\u0E38\\u0E17\\u0E18\\u0E34 (%)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:Math.round(item.netIncome.raw/item.totalRevenue.raw*100*100)/100});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".pNpmEl\"))),{},{className:\"text-center form-control m-auto\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E33\\u0E44\\u0E23\\u0E2A\\u0E38\\u0E17\\u0E18\\u0E34 (\\u0E25\\u0E1A.)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(item.netIncome.raw)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));var pNpm=watch(\"predict.\".concat(index,\".pNpmEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:pNpm?formatNumber((rev+rev*(growth/100))*(pNpm/100)):\"\"})});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-nowrap\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E2B\\u0E38\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48\\u0E08\\u0E14\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19 (\\u0E25\\u0E49\\u0E32\\u0E19\\u0E2B\\u0E38\\u0E49\\u0E19)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(balanceSheetStatements[index].commonStock.raw)});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".totalSharesEl\"))),{},{className:\"text-center form-control m-auto\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E33\\u0E44\\u0E23\\u0E15\\u0E48\\u0E2D\\u0E2B\\u0E38\\u0E49\\u0E19 (\\u0E1A\\u0E32\\u0E17)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:(+item.netIncome.raw/+balanceSheetStatements[index].commonStock.raw).toFixed(2)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));var pNpm=watch(\"predict.\".concat(index,\".pNpmEl\"));var shares=watch(\"predict.\".concat(index,\".totalSharesEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:shares?formatNumber((rev+rev*(growth/100))*(pNpm/100)/shares):\"\"})});})]})]})]})});return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid \",children:quoteSummary?displayTable2:\"\"});};export default Table;","map":{"version":3,"sources":["C:/Users/narut/Documents/Coding/stock-calc/src/Component/Table.js"],"names":["React","useState","useEffect","useForm","useFieldArray","Controller","useWatch","FaTimesCircle","Table","quoteSummary","growth","setGrowth","npm","setNpm","totalShares","setTotalShares","incomeStatementHistory","reverse","balanceSheetStatements","balanceSheetHistory","revenue","totalRevenue","raw","styles","tableHeader","backgroundColor","defaultValues","predict","revenueEl","growthRevEl","pNpmEl","npmEl","totalSharesEl","epsEl","register","control","handleSubmit","reset","watch","setValue","getValues","name","fields","append","prepend","remove","swap","move","insert","replace","lastRev","length","lastGrowth","formatNumber","data","Math","round","toString","displayTable2","width","overflowX","map","item","Date","endDate","getFullYear","index","cursor","rev","revGrowth","netIncome","pNpm","commonStock","toFixed","shares"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useForm, useFieldArray, Controller, useWatch } from \"react-hook-form\";\r\nimport { FaTimesCircle } from \"react-icons/fa\";\r\n\r\nconst Table = ({ quoteSummary }) => {\r\n  const [growth, setGrowth] = useState(0);\r\n  const [npm, setNpm] = useState(0);\r\n  const [totalShares, setTotalShares] = useState(0);\r\n  const incomeStatementHistory = quoteSummary\r\n    ? [\r\n        ...quoteSummary?.incomeStatementHistory?.incomeStatementHistory,\r\n      ]?.reverse()\r\n    : [];\r\n\r\n  const balanceSheetStatements = quoteSummary\r\n    ? [...quoteSummary?.balanceSheetHistory?.balanceSheetStatements]?.reverse()\r\n    : [];\r\n\r\n  const revenue =\r\n    quoteSummary?.incomeStatementHistory?.incomeStatementHistory[0]\r\n      ?.totalRevenue.raw +\r\n    quoteSummary?.incomeStatementHistory?.incomeStatementHistory[0]\r\n      ?.totalRevenue.raw *\r\n      (growth / 100);\r\n\r\n  const styles = {\r\n    tableHeader: {\r\n      backgroundColor: \"rgba(227, 242, 253, 1)\",\r\n    },\r\n  };\r\n\r\n  const defaultValues = {\r\n    predict: [\r\n      {\r\n        revenueEl: revenue,\r\n        growthRevEl: 0,\r\n        pNpmEl: 0,\r\n        npmEl: 0,\r\n        totalSharesEl: 0,\r\n        epsEl: 0,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const { register, control, handleSubmit, reset, watch, setValue, getValues } =\r\n    useForm();\r\n\r\n  const { fields, append, prepend, remove, swap, move, insert, replace } =\r\n    useFieldArray({\r\n      control,\r\n      name: \"predict\",\r\n    });\r\n\r\n  const lastRev = watch(`predict.${fields.length - 1}.revenueEl`);\r\n  const lastGrowth = watch(`predict.${fields.length - 1}.growthRevEl`);\r\n\r\n  useEffect(() => {\r\n    if (quoteSummary) reset(defaultValues);\r\n  }, [quoteSummary]);\r\n\r\n  const formatNumber = (data) => {\r\n    return (Math.round((data / 1000000) * 100) / 100)\r\n      .toString()\r\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  };\r\n\r\n  const displayTable2 = (\r\n    <div style={{ width: \"100%\", overflowX: \"scroll\" }}>\r\n      <table className=\"table \">\r\n        <thead className=\"text-center\" style={styles.tableHeader}>\r\n          <tr>\r\n            <td></td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td key={item.endDate.raw}>\r\n                      {new Date(item.endDate.raw * 1000).getFullYear()}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"-\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td>\r\n                  {new Date().getFullYear() + index}{\" \"}\r\n                  {index !== 0 ? (\r\n                    <span\r\n                      className=\"float-end\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={() => remove(index)}\r\n                    >\r\n                      <FaTimesCircle />\r\n                    </span>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </td>\r\n              );\r\n            })}\r\n            <td>\r\n              <div\r\n                type=\"button\"\r\n                className=\"btn btn-outline-primary btn-sm\"\r\n                onClick={() => {\r\n                  append({\r\n                    revenueEl: lastRev + lastRev * (lastGrowth / 100),\r\n                    growthRevEl: 0,\r\n                    pNpmEl: 0,\r\n                    npmEl: 0,\r\n                    totalSharesEl: 0,\r\n                    epsEl: 0,\r\n                  });\r\n                }}\r\n              >\r\n                +\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>รายได้ (ลบ.)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(item.totalRevenue.raw)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>{formatNumber(rev + rev * (growth / 100))}</div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>การเติบโตของรายได้ (%)</td>\r\n\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  let revGrowth;\r\n                  if (index !== 0) {\r\n                    revGrowth = `\r\n                        ${\r\n                          Math.round(\r\n                            (item?.totalRevenue.raw /\r\n                              incomeStatementHistory[index - 1]?.totalRevenue\r\n                                .raw -\r\n                              1) *\r\n                              100 *\r\n                              100\r\n                          ) / 100\r\n                        }`;\r\n                  } else {\r\n                    revGrowth = \"-\";\r\n                  }\r\n\r\n                  return <td className=\"text-center\">{revGrowth}</td>;\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.growthRevEl`)}\r\n                    className=\"text-center form-control m-auto\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n\r\n          <tr>\r\n            <td>อัตรากำไรสุทธิ (%)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {Math.round(\r\n                        (item.netIncome.raw / item.totalRevenue.raw) * 100 * 100\r\n                      ) / 100}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.pNpmEl`)}\r\n                    className=\"text-center form-control m-auto\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>กำไรสุทธิ (ลบ.)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(item.netIncome.raw)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n              const pNpm = watch(`predict.${index}.pNpmEl`);\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>\r\n                    {pNpm\r\n                      ? formatNumber(\r\n                          (rev + rev * (growth / 100)) * (pNpm / 100)\r\n                        )\r\n                      : \"\"}\r\n                  </div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td className=\"text-nowrap\">จำนวนหุ้นที่จดทะเบียน (ล้านหุ้น)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(\r\n                        balanceSheetStatements[index].commonStock.raw\r\n                      )}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.totalSharesEl`)}\r\n                    className=\"text-center form-control m-auto\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>กำไรต่อหุ้น (บาท)</td>\r\n\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {(\r\n                        +item.netIncome.raw /\r\n                        +balanceSheetStatements[index].commonStock.raw\r\n                      ).toFixed(2)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n              const pNpm = watch(`predict.${index}.pNpmEl`);\r\n              const shares = watch(`predict.${index}.totalSharesEl`);\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>\r\n                    {shares\r\n                      ? formatNumber(\r\n                          ((rev + rev * (growth / 100)) * (pNpm / 100)) / shares\r\n                        )\r\n                      : \"\"}\r\n                  </div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container-fluid \">{quoteSummary ? displayTable2 : \"\"}</div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n"]},"metadata":{},"sourceType":"module"}