{"ast":null,"code":"var _ = require('lodash'),\n    $ = require('../static'),\n    utils = require('../utils'),\n    isTag = utils.isTag,\n    domEach = utils.domEach,\n    hasOwn = Object.prototype.hasOwnProperty,\n    camelCase = utils.camelCase,\n    cssCase = utils.cssCase,\n    rspace = /\\s+/,\n    dataAttrPrefix = 'data-',\n    // Lookup table for coercing string data-* attributes to their corresponding\n// JavaScript primitives\nprimitives = {\n  null: null,\n  true: true,\n  false: false\n},\n    // Attributes that are booleans\nrboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\n    // Matches strings that look like JSON objects or arrays\nrbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\n\nvar getAttr = function (elem, name) {\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.attribs) {\n    elem.attribs = {};\n  } // Return the entire attribs object if no attribute specified\n\n\n  if (!name) {\n    return elem.attribs;\n  }\n\n  if (hasOwn.call(elem.attribs, name)) {\n    // Get the (decoded) attribute\n    return rboolean.test(name) ? name : elem.attribs[name];\n  } // Mimic the DOM and return text content as value for `option's`\n\n\n  if (elem.name === 'option' && name === 'value') {\n    return $.text(elem.children);\n  }\n};\n\nvar setAttr = function (el, name, value) {\n  if (value === null) {\n    removeAttribute(el, name);\n  } else {\n    el.attribs[name] = value + '';\n  }\n};\n\nexports.attr = function (name, value) {\n  // Set the value (with attr map support)\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (i, el) {\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\n      });\n    }\n\n    return domEach(this, function (i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.each(name, function (value, name) {\n          setAttr(el, name, value);\n        });\n      } else {\n        setAttr(el, name, value);\n      }\n    });\n  }\n\n  return getAttr(this[0], name);\n};\n\nvar getProp = function (el, name) {\n  return el.hasOwnProperty(name) ? el[name] : rboolean.test(name) ? getAttr(el, name) !== undefined : getAttr(el, name);\n};\n\nvar setProp = function (el, name, value) {\n  el[name] = rboolean.test(name) ? !!value : value;\n};\n\nexports.prop = function (name, value) {\n  var i = 0,\n      property;\n\n  if (typeof name === 'string' && value === undefined) {\n    switch (name) {\n      case 'style':\n        property = this.css();\n\n        _.each(property, function (v, p) {\n          property[i++] = p;\n        });\n\n        property.length = i;\n        break;\n\n      case 'tagName':\n      case 'nodeName':\n        property = this[0].name.toUpperCase();\n        break;\n\n      default:\n        property = getProp(this[0], name);\n    }\n\n    return property;\n  }\n\n  if (typeof name === 'object' || value !== undefined) {\n    if (typeof value === 'function') {\n      return domEach(this, function (i, el) {\n        setProp(el, name, value.call(el, i, getProp(el, name)));\n      });\n    }\n\n    return domEach(this, function (i, el) {\n      if (!isTag(el)) return;\n\n      if (typeof name === 'object') {\n        _.each(name, function (val, name) {\n          setProp(el, name, val);\n        });\n      } else {\n        setProp(el, name, value);\n      }\n    });\n  }\n};\n\nvar setData = function (el, name, value) {\n  if (!el.data) {\n    el.data = {};\n  }\n\n  if (typeof name === 'object') return _.extend(el.data, name);\n\n  if (typeof name === 'string' && value !== undefined) {\n    el.data[name] = value;\n  } else if (typeof name === 'object') {\n    _.exend(el.data, name);\n  }\n}; // Read the specified attribute from the equivalent HTML5 `data-*` attribute,\n// and (if present) cache the value in the node's internal data store. If no\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\n// manner.\n\n\nvar readData = function (el, name) {\n  var readAll = arguments.length === 1;\n  var domNames, domName, jsNames, jsName, value, idx, length;\n\n  if (readAll) {\n    domNames = Object.keys(el.attribs).filter(function (attrName) {\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\n    });\n    jsNames = domNames.map(function (domName) {\n      return camelCase(domName.slice(dataAttrPrefix.length));\n    });\n  } else {\n    domNames = [dataAttrPrefix + cssCase(name)];\n    jsNames = [name];\n  }\n\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\n    domName = domNames[idx];\n    jsName = jsNames[idx];\n\n    if (hasOwn.call(el.attribs, domName)) {\n      value = el.attribs[domName];\n\n      if (hasOwn.call(primitives, value)) {\n        value = primitives[value];\n      } else if (value === String(Number(value))) {\n        value = Number(value);\n      } else if (rbrace.test(value)) {\n        try {\n          value = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      el.data[jsName] = value;\n    }\n  }\n\n  return readAll ? el.data : value;\n};\n\nexports.data = function (name, value) {\n  var elem = this[0];\n  if (!elem || !isTag(elem)) return;\n\n  if (!elem.data) {\n    elem.data = {};\n  } // Return the entire data object if no data specified\n\n\n  if (!name) {\n    return readData(elem);\n  } // Set the value (with attr map support)\n\n\n  if (typeof name === 'object' || value !== undefined) {\n    domEach(this, function (i, el) {\n      setData(el, name, value);\n    });\n    return this;\n  } else if (hasOwn.call(elem.data, name)) {\n    return elem.data[name];\n  }\n\n  return readData(elem, name);\n};\n/**\r\n * Get the value of an element\r\n */\n\n\nexports.val = function (value) {\n  var querying = arguments.length === 0,\n      element = this[0];\n  if (!element) return;\n\n  switch (element.name) {\n    case 'textarea':\n      return this.text(value);\n\n    case 'input':\n      switch (this.attr('type')) {\n        case 'radio':\n          if (querying) {\n            return this.attr('value');\n          } else {\n            this.attr('value', value);\n            return this;\n          }\n\n          break;\n\n        default:\n          return this.attr('value', value);\n      }\n\n      return;\n\n    case 'select':\n      var option = this.find('option:selected'),\n          returnValue;\n      if (option === undefined) return undefined;\n\n      if (!querying) {\n        if (!this.attr().hasOwnProperty('multiple') && typeof value == 'object') {\n          return this;\n        }\n\n        if (typeof value != 'object') {\n          value = [value];\n        }\n\n        this.find('option').removeAttr('selected');\n\n        for (var i = 0; i < value.length; i++) {\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\n        }\n\n        return this;\n      }\n\n      returnValue = option.attr('value');\n\n      if (this.attr().hasOwnProperty('multiple')) {\n        returnValue = [];\n        domEach(option, function (i, el) {\n          returnValue.push(getAttr(el, 'value'));\n        });\n      }\n\n      return returnValue;\n\n    case 'option':\n      if (!querying) {\n        this.attr('value', value);\n        return this;\n      }\n\n      return this.attr('value');\n  }\n};\n/**\r\n * Remove an attribute\r\n */\n\n\nvar removeAttribute = function (elem, name) {\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name)) return;\n  delete elem.attribs[name];\n};\n\nexports.removeAttr = function (name) {\n  domEach(this, function (i, elem) {\n    removeAttribute(elem, name);\n  });\n  return this;\n};\n\nexports.hasClass = function (className) {\n  return _.some(this, function (elem) {\n    var attrs = elem.attribs,\n        clazz = attrs && attrs['class'],\n        idx = -1,\n        end;\n\n    if (clazz) {\n      while ((idx = clazz.indexOf(className, idx + 1)) > -1) {\n        end = idx + className.length;\n\n        if ((idx === 0 || rspace.test(clazz[idx - 1])) && (end === clazz.length || rspace.test(clazz[end]))) {\n          return true;\n        }\n      }\n    }\n  });\n};\n\nexports.addClass = function (value) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      var className = el.attribs['class'] || '';\n      exports.addClass.call([el], value.call(el, i, className));\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numElements = this.length;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue; // If we don't already have classes\n\n    var className = getAttr(this[i], 'class'),\n        numClasses,\n        setClass;\n\n    if (!className) {\n      setAttr(this[i], 'class', classNames.join(' ').trim());\n    } else {\n      setClass = ' ' + className + ' ';\n      numClasses = classNames.length; // Check if class already exists\n\n      for (var j = 0; j < numClasses; j++) {\n        var appendClass = classNames[j] + ' ';\n        if (setClass.indexOf(' ' + appendClass) < 0) setClass += appendClass;\n      }\n\n      setAttr(this[i], 'class', setClass.trim());\n    }\n  }\n\n  return this;\n};\n\nvar splitClass = function (className) {\n  return className ? className.trim().split(rspace) : [];\n};\n\nexports.removeClass = function (value) {\n  var classes, numClasses, removeAll; // Handle if value is a function\n\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.removeClass.call([el], value.call(el, i, el.attribs['class'] || ''));\n    });\n  }\n\n  classes = splitClass(value);\n  numClasses = classes.length;\n  removeAll = arguments.length === 0;\n  return domEach(this, function (i, el) {\n    if (!isTag(el)) return;\n\n    if (removeAll) {\n      // Short circuit the remove all case as this is the nice one\n      el.attribs.class = '';\n    } else {\n      var elClasses = splitClass(el.attribs.class),\n          index,\n          changed;\n\n      for (var j = 0; j < numClasses; j++) {\n        index = elClasses.indexOf(classes[j]);\n\n        if (index >= 0) {\n          elClasses.splice(index, 1);\n          changed = true; // We have to do another pass to ensure that there are not duplicate\n          // classes listed\n\n          j--;\n        }\n      }\n\n      if (changed) {\n        el.attribs.class = elClasses.join(' ');\n      }\n    }\n  });\n};\n\nexports.toggleClass = function (value, stateVal) {\n  // Support functions\n  if (typeof value === 'function') {\n    return domEach(this, function (i, el) {\n      exports.toggleClass.call([el], value.call(el, i, el.attribs['class'] || '', stateVal), stateVal);\n    });\n  } // Return if no value or not a string or function\n\n\n  if (!value || typeof value !== 'string') return this;\n  var classNames = value.split(rspace),\n      numClasses = classNames.length,\n      state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\n      numElements = this.length,\n      elementClasses,\n      index;\n\n  for (var i = 0; i < numElements; i++) {\n    // If selected element isn't a tag, move on\n    if (!isTag(this[i])) continue;\n    elementClasses = splitClass(this[i].attribs.class); // Check if class already exists\n\n    for (var j = 0; j < numClasses; j++) {\n      // Check if the class name is currently defined\n      index = elementClasses.indexOf(classNames[j]); // Add if stateValue === true or we are toggling and there is no value\n\n      if (state >= 0 && index < 0) {\n        elementClasses.push(classNames[j]);\n      } else if (state <= 0 && index >= 0) {\n        // Otherwise remove but only if the item exists\n        elementClasses.splice(index, 1);\n      }\n    }\n\n    this[i].attribs.class = elementClasses.join(' ');\n  }\n\n  return this;\n};\n\nexports.is = function (selector) {\n  if (selector) {\n    return this.filter(selector).length > 0;\n  }\n\n  return false;\n};","map":{"version":3,"sources":["C:/Users/narut/Documents/Coding/coindy/node_modules/cheerio/lib/api/attributes.js"],"names":["_","require","$","utils","isTag","domEach","hasOwn","Object","prototype","hasOwnProperty","camelCase","cssCase","rspace","dataAttrPrefix","primitives","null","true","false","rboolean","rbrace","getAttr","elem","name","attribs","call","test","text","children","setAttr","el","value","removeAttribute","exports","attr","undefined","i","each","getProp","setProp","prop","property","css","v","p","length","toUpperCase","val","setData","data","extend","exend","readData","readAll","arguments","domNames","domName","jsNames","jsName","idx","keys","filter","attrName","slice","map","String","Number","JSON","parse","e","querying","element","option","find","returnValue","removeAttr","push","hasClass","className","some","attrs","clazz","end","indexOf","addClass","classNames","split","numElements","numClasses","setClass","join","trim","j","appendClass","splitClass","removeClass","classes","removeAll","class","elClasses","index","changed","splice","toggleClass","stateVal","state","elementClasses","is","selector"],"mappings":"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","sourcesContent":["var _ = require('lodash'),\r\n  $ = require('../static'),\r\n  utils = require('../utils'),\r\n  isTag = utils.isTag,\r\n  domEach = utils.domEach,\r\n  hasOwn = Object.prototype.hasOwnProperty,\r\n  camelCase = utils.camelCase,\r\n  cssCase = utils.cssCase,\r\n  rspace = /\\s+/,\r\n  dataAttrPrefix = 'data-',\r\n\r\n  // Lookup table for coercing string data-* attributes to their corresponding\r\n  // JavaScript primitives\r\n  primitives = {\r\n    null: null,\r\n    true: true,\r\n    false: false\r\n  },\r\n\r\n  // Attributes that are booleans\r\n  rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\r\n  // Matches strings that look like JSON objects or arrays\r\n  rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/;\r\n\r\n\r\nvar getAttr = function(elem, name) {\r\n  if (!elem || !isTag(elem)) return;\r\n\r\n  if (!elem.attribs) {\r\n    elem.attribs = {};\r\n  }\r\n\r\n  // Return the entire attribs object if no attribute specified\r\n  if (!name) {\r\n    return elem.attribs;\r\n  }\r\n\r\n  if (hasOwn.call(elem.attribs, name)) {\r\n    // Get the (decoded) attribute\r\n    return rboolean.test(name) ? name : elem.attribs[name];\r\n  }\r\n\r\n  // Mimic the DOM and return text content as value for `option's`\r\n  if (elem.name === 'option' && name === 'value') {\r\n    return $.text(elem.children);\r\n  }\r\n};\r\n\r\nvar setAttr = function(el, name, value) {\r\n\r\n  if (value === null) {\r\n    removeAttribute(el, name);\r\n  } else {\r\n    el.attribs[name] = value+'';\r\n  }\r\n};\r\n\r\nexports.attr = function(name, value) {\r\n  // Set the value (with attr map support)\r\n  if (typeof name === 'object' || value !== undefined) {\r\n    if (typeof value === 'function') {\r\n      return domEach(this, function(i, el) {\r\n        setAttr(el, name, value.call(el, i, el.attribs[name]));\r\n      });\r\n    }\r\n    return domEach(this, function(i, el) {\r\n      if (!isTag(el)) return;\r\n\r\n      if (typeof name === 'object') {\r\n        _.each(name, function(value, name) {\r\n          setAttr(el, name, value);\r\n        });\r\n      } else {\r\n        setAttr(el, name, value);\r\n      }\r\n    });\r\n  }\r\n\r\n  return getAttr(this[0], name);\r\n};\r\n\r\nvar getProp = function (el, name) {\r\n  return el.hasOwnProperty(name)\r\n      ? el[name]\r\n      : rboolean.test(name)\r\n          ? getAttr(el, name) !== undefined\r\n          : getAttr(el, name);\r\n};\r\n\r\nvar setProp = function (el, name, value) {\r\n  el[name] = rboolean.test(name) ? !!value : value;\r\n};\r\n\r\nexports.prop = function (name, value) {\r\n  var i = 0,\r\n      property;\r\n\r\n  if (typeof name === 'string' && value === undefined) {\r\n\r\n    switch (name) {\r\n      case 'style':\r\n        property = this.css();\r\n\r\n        _.each(property, function (v, p) {\r\n          property[i++] = p;\r\n        });\r\n\r\n        property.length = i;\r\n\r\n        break;\r\n      case 'tagName':\r\n      case 'nodeName':\r\n        property = this[0].name.toUpperCase();\r\n        break;\r\n      default:\r\n        property = getProp(this[0], name);\r\n    }\r\n\r\n    return property;\r\n  }\r\n\r\n  if (typeof name === 'object' || value !== undefined) {\r\n\r\n    if (typeof value === 'function') {\r\n      return domEach(this, function(i, el) {\r\n        setProp(el, name, value.call(el, i, getProp(el, name)));\r\n      });\r\n    }\r\n\r\n    return domEach(this, function(i, el) {\r\n      if (!isTag(el)) return;\r\n\r\n      if (typeof name === 'object') {\r\n\r\n        _.each(name, function(val, name) {\r\n          setProp(el, name, val);\r\n        });\r\n\r\n      } else {\r\n        setProp(el, name, value);\r\n      }\r\n    });\r\n\r\n  }\r\n};\r\n\r\nvar setData = function(el, name, value) {\r\n  if (!el.data) {\r\n    el.data = {};\r\n  }\r\n\r\n  if (typeof name === 'object') return _.extend(el.data, name);\r\n  if (typeof name === 'string' && value !== undefined) {\r\n    el.data[name] = value;\r\n  } else if (typeof name === 'object') {\r\n    _.exend(el.data, name);\r\n  }\r\n};\r\n\r\n// Read the specified attribute from the equivalent HTML5 `data-*` attribute,\r\n// and (if present) cache the value in the node's internal data store. If no\r\n// attribute name is specified, read *all* HTML5 `data-*` attributes in this\r\n// manner.\r\nvar readData = function(el, name) {\r\n  var readAll = arguments.length === 1;\r\n  var domNames, domName, jsNames, jsName, value, idx, length;\r\n\r\n  if (readAll) {\r\n    domNames = Object.keys(el.attribs).filter(function(attrName) {\r\n      return attrName.slice(0, dataAttrPrefix.length) === dataAttrPrefix;\r\n    });\r\n    jsNames = domNames.map(function(domName) {\r\n      return camelCase(domName.slice(dataAttrPrefix.length));\r\n    });\r\n  } else {\r\n    domNames = [dataAttrPrefix + cssCase(name)];\r\n    jsNames = [name];\r\n  }\r\n\r\n  for (idx = 0, length = domNames.length; idx < length; ++idx) {\r\n    domName = domNames[idx];\r\n    jsName = jsNames[idx];\r\n    if (hasOwn.call(el.attribs, domName)) {\r\n      value = el.attribs[domName];\r\n\r\n      if (hasOwn.call(primitives, value)) {\r\n        value = primitives[value];\r\n      } else if (value === String(Number(value))) {\r\n        value = Number(value);\r\n      } else if (rbrace.test(value)) {\r\n        try {\r\n          value = JSON.parse(value);\r\n        } catch(e){ }\r\n      }\r\n\r\n      el.data[jsName] = value;\r\n    }\r\n  }\r\n\r\n  return readAll ? el.data : value;\r\n};\r\n\r\nexports.data = function(name, value) {\r\n  var elem = this[0];\r\n\r\n  if (!elem || !isTag(elem)) return;\r\n\r\n  if (!elem.data) {\r\n    elem.data = {};\r\n  }\r\n\r\n  // Return the entire data object if no data specified\r\n  if (!name) {\r\n    return readData(elem);\r\n  }\r\n\r\n  // Set the value (with attr map support)\r\n  if (typeof name === 'object' || value !== undefined) {\r\n    domEach(this, function(i, el) {\r\n      setData(el, name, value);\r\n    });\r\n    return this;\r\n  } else if (hasOwn.call(elem.data, name)) {\r\n    return elem.data[name];\r\n  }\r\n\r\n  return readData(elem, name);\r\n};\r\n\r\n/**\r\n * Get the value of an element\r\n */\r\n\r\nexports.val = function(value) {\r\n  var querying = arguments.length === 0,\r\n      element = this[0];\r\n\r\n  if(!element) return;\r\n\r\n  switch (element.name) {\r\n    case 'textarea':\r\n      return this.text(value);\r\n    case 'input':\r\n      switch (this.attr('type')) {\r\n        case 'radio':\r\n          if (querying) {\r\n            return this.attr('value');\r\n          } else {\r\n            this.attr('value', value);\r\n            return this;\r\n          }\r\n          break;\r\n        default:\r\n          return this.attr('value', value);\r\n      }\r\n      return;\r\n    case 'select':\r\n      var option = this.find('option:selected'),\r\n          returnValue;\r\n      if (option === undefined) return undefined;\r\n      if (!querying) {\r\n        if (!this.attr().hasOwnProperty('multiple') && typeof value == 'object') {\r\n          return this;\r\n        }\r\n        if (typeof value != 'object') {\r\n          value = [value];\r\n        }\r\n        this.find('option').removeAttr('selected');\r\n        for (var i = 0; i < value.length; i++) {\r\n          this.find('option[value=\"' + value[i] + '\"]').attr('selected', '');\r\n        }\r\n        return this;\r\n      }\r\n      returnValue = option.attr('value');\r\n      if (this.attr().hasOwnProperty('multiple')) {\r\n        returnValue = [];\r\n        domEach(option, function(i, el) {\r\n          returnValue.push(getAttr(el, 'value'));\r\n        });\r\n      }\r\n      return returnValue;\r\n    case 'option':\r\n      if (!querying) {\r\n        this.attr('value', value);\r\n        return this;\r\n      }\r\n      return this.attr('value');\r\n  }\r\n};\r\n\r\n/**\r\n * Remove an attribute\r\n */\r\n\r\nvar removeAttribute = function(elem, name) {\r\n  if (!elem.attribs || !hasOwn.call(elem.attribs, name))\r\n    return;\r\n\r\n  delete elem.attribs[name];\r\n};\r\n\r\n\r\nexports.removeAttr = function(name) {\r\n  domEach(this, function(i, elem) {\r\n    removeAttribute(elem, name);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\nexports.hasClass = function(className) {\r\n  return _.some(this, function(elem) {\r\n    var attrs = elem.attribs,\r\n        clazz = attrs && attrs['class'],\r\n        idx = -1,\r\n        end;\r\n\r\n    if (clazz) {\r\n      while ((idx = clazz.indexOf(className, idx+1)) > -1) {\r\n        end = idx + className.length;\r\n\r\n        if ((idx === 0 || rspace.test(clazz[idx-1]))\r\n            && (end === clazz.length || rspace.test(clazz[end]))) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nexports.addClass = function(value) {\r\n  // Support functions\r\n  if (typeof value === 'function') {\r\n    return domEach(this, function(i, el) {\r\n      var className = el.attribs['class'] || '';\r\n      exports.addClass.call([el], value.call(el, i, className));\r\n    });\r\n  }\r\n\r\n  // Return if no value or not a string or function\r\n  if (!value || typeof value !== 'string') return this;\r\n\r\n  var classNames = value.split(rspace),\r\n      numElements = this.length;\r\n\r\n\r\n  for (var i = 0; i < numElements; i++) {\r\n    // If selected element isn't a tag, move on\r\n    if (!isTag(this[i])) continue;\r\n\r\n    // If we don't already have classes\r\n    var className = getAttr(this[i], 'class'),\r\n        numClasses,\r\n        setClass;\r\n\r\n    if (!className) {\r\n      setAttr(this[i], 'class', classNames.join(' ').trim());\r\n    } else {\r\n      setClass = ' ' + className + ' ';\r\n      numClasses = classNames.length;\r\n\r\n      // Check if class already exists\r\n      for (var j = 0; j < numClasses; j++) {\r\n        var appendClass = classNames[j] + ' ';\r\n        if (setClass.indexOf(' ' + appendClass) < 0)\r\n          setClass += appendClass;\r\n      }\r\n\r\n      setAttr(this[i], 'class', setClass.trim());\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nvar splitClass = function(className) {\r\n  return className ? className.trim().split(rspace) : [];\r\n};\r\n\r\nexports.removeClass = function(value) {\r\n  var classes,\r\n      numClasses,\r\n      removeAll;\r\n\r\n  // Handle if value is a function\r\n  if (typeof value === 'function') {\r\n    return domEach(this, function(i, el) {\r\n      exports.removeClass.call(\r\n        [el], value.call(el, i, el.attribs['class'] || '')\r\n      );\r\n    });\r\n  }\r\n\r\n  classes = splitClass(value);\r\n  numClasses = classes.length;\r\n  removeAll = arguments.length === 0;\r\n\r\n  return domEach(this, function(i, el) {\r\n    if (!isTag(el)) return;\r\n\r\n    if (removeAll) {\r\n      // Short circuit the remove all case as this is the nice one\r\n      el.attribs.class = '';\r\n    } else {\r\n      var elClasses = splitClass(el.attribs.class),\r\n          index,\r\n          changed;\r\n\r\n      for (var j = 0; j < numClasses; j++) {\r\n        index = elClasses.indexOf(classes[j]);\r\n\r\n        if (index >= 0) {\r\n          elClasses.splice(index, 1);\r\n          changed = true;\r\n\r\n          // We have to do another pass to ensure that there are not duplicate\r\n          // classes listed\r\n          j--;\r\n        }\r\n      }\r\n      if (changed) {\r\n        el.attribs.class = elClasses.join(' ');\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nexports.toggleClass = function(value, stateVal) {\r\n  // Support functions\r\n  if (typeof value === 'function') {\r\n    return domEach(this, function(i, el) {\r\n      exports.toggleClass.call(\r\n        [el],\r\n        value.call(el, i, el.attribs['class'] || '', stateVal),\r\n        stateVal\r\n      );\r\n    });\r\n  }\r\n\r\n  // Return if no value or not a string or function\r\n  if (!value || typeof value !== 'string') return this;\r\n\r\n  var classNames = value.split(rspace),\r\n    numClasses = classNames.length,\r\n    state = typeof stateVal === 'boolean' ? stateVal ? 1 : -1 : 0,\r\n    numElements = this.length,\r\n    elementClasses,\r\n    index;\r\n\r\n  for (var i = 0; i < numElements; i++) {\r\n    // If selected element isn't a tag, move on\r\n    if (!isTag(this[i])) continue;\r\n\r\n    elementClasses = splitClass(this[i].attribs.class);\r\n\r\n    // Check if class already exists\r\n    for (var j = 0; j < numClasses; j++) {\r\n      // Check if the class name is currently defined\r\n      index = elementClasses.indexOf(classNames[j]);\r\n\r\n      // Add if stateValue === true or we are toggling and there is no value\r\n      if (state >= 0 && index < 0) {\r\n        elementClasses.push(classNames[j]);\r\n      } else if (state <= 0 && index >= 0) {\r\n        // Otherwise remove but only if the item exists\r\n        elementClasses.splice(index, 1);\r\n      }\r\n    }\r\n\r\n    this[i].attribs.class = elementClasses.join(' ');\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nexports.is = function (selector) {\r\n  if (selector) {\r\n    return this.filter(selector).length > 0;\r\n  }\r\n  return false;\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"script"}