{"ast":null,"code":"import _objectSpread from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useForm,useFieldArray,Controller,useWatch}from\"react-hook-form\";import{FaTimesCircle,FaPlus}from\"react-icons/fa\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Table=function Table(_ref){var _ref2,_quoteSummary$incomeS,_ref3,_quoteSummary$balance,_quoteSummary$incomeS2,_quoteSummary$incomeS3,_quoteSummary$incomeS4,_quoteSummary$incomeS5,_initQuoteSpark$times;var quoteSummary=_ref.quoteSummary,initQuoteSpark=_ref.initQuoteSpark,setFairValue=_ref.setFairValue;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),growth=_useState2[0],setGrowth=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),npm=_useState4[0],setNpm=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalShares=_useState6[0],setTotalShares=_useState6[1];var incomeStatementHistory=quoteSummary?(_ref2=_toConsumableArray(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS===void 0?void 0:_quoteSummary$incomeS.incomeStatementHistory))===null||_ref2===void 0?void 0:_ref2.reverse():[];var balanceSheetStatements=quoteSummary?(_ref3=_toConsumableArray(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$balance=quoteSummary.balanceSheetHistory)===null||_quoteSummary$balance===void 0?void 0:_quoteSummary$balance.balanceSheetStatements))===null||_ref3===void 0?void 0:_ref3.reverse():[];var revenue=(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS2=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS2===void 0?void 0:(_quoteSummary$incomeS3=_quoteSummary$incomeS2.incomeStatementHistory[0])===null||_quoteSummary$incomeS3===void 0?void 0:_quoteSummary$incomeS3.totalRevenue.raw)+(quoteSummary===null||quoteSummary===void 0?void 0:(_quoteSummary$incomeS4=quoteSummary.incomeStatementHistory)===null||_quoteSummary$incomeS4===void 0?void 0:(_quoteSummary$incomeS5=_quoteSummary$incomeS4.incomeStatementHistory[0])===null||_quoteSummary$incomeS5===void 0?void 0:_quoteSummary$incomeS5.totalRevenue.raw)*(growth/100);var styles={tableHeader:{backgroundColor:\"rgba(227, 242, 253, 1)\"}};var defaultValues={predict:[{revenueEl:revenue,growthRevEl:0,pNpmEl:0,npmEl:0,totalSharesEl:0,epsEl:0}]};var _useForm=useForm(),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,watch=_useForm.watch,setValue=_useForm.setValue,getValues=_useForm.getValues;var _useFieldArray=useFieldArray({control:control,name:\"predict\"}),fields=_useFieldArray.fields,append=_useFieldArray.append,prepend=_useFieldArray.prepend,remove=_useFieldArray.remove,swap=_useFieldArray.swap,move=_useFieldArray.move,insert=_useFieldArray.insert,replace=_useFieldArray.replace;var formatNumber=function formatNumber(data){return(Math.round(data/1000000*100)/100).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");};var convertDate=function convertDate(value){var result=new Date(value*1000);var date=result.getDate();var month=result.getMonth()+1;var year=result.getFullYear();if(date<10){date=\"0\"+date;}if(month<10){month=\"0\"+month;}return\"\".concat(date,\"/\").concat(month,\"/\").concat(year);};var getYear=function getYear(value){var result=new Date(value*1000);var year=result.getFullYear();return year;};var lastRev=watch(\"predict.\".concat(fields.length-1,\".revenueEl\"));var lastGrowth=watch(\"predict.\".concat(fields.length-1,\".growthRevEl\"));var lastPNpm=watch(\"predict.\".concat(fields.length-1,\".pNpmEl\"));var lastShares=watch(\"predict.\".concat(fields.length-1,\".totalSharesEl\"));var lastPe=watch(\"predict.\".concat(fields.length-1,\".peEl\"));var lastEps=formatNumber((lastRev+lastRev*(lastGrowth/100))*(lastPNpm/100)/lastShares);var lastPrice=lastPe*lastEps;useEffect(function(){setFairValue(lastPrice);},[lastPrice]);useEffect(function(){if(quoteSummary)reset(defaultValues);},[quoteSummary]);var getPrice=initQuoteSpark===null||initQuoteSpark===void 0?void 0:(_initQuoteSpark$times=initQuoteSpark.timestamp)===null||_initQuoteSpark$times===void 0?void 0:_initQuoteSpark$times.map(function(item,index){return{date:convertDate(item),year:getYear(item),price:initQuoteSpark.close[index]};}).filter(function(item){return item.date.startsWith(\"01/12\")&&item.year>=new Date().getFullYear()-4;});var displayTable2=/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",overflowX:\"scroll\"},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-center\",style:styles.tableHeader,children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{children:new Date(item.endDate.raw*1000).getFullYear()},item.endDate.raw);}):\"-\",fields.map(function(item,index){return/*#__PURE__*/_jsxs(\"td\",{children:[new Date().getFullYear()+index,\" \",index!==0?/*#__PURE__*/_jsx(\"span\",{className:\"float-end\",style:{cursor:\"pointer\"},onClick:function onClick(){return remove(index);},children:/*#__PURE__*/_jsx(FaTimesCircle,{})}):\"\"]});}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{type:\"button\",className:\"btn btn-outline-primary btn-sm\",onClick:function onClick(){append({revenueEl:lastRev+lastRev*(lastGrowth/100),growthRevEl:0,pNpmEl:0,npmEl:0,totalSharesEl:0,epsEl:0});},children:/*#__PURE__*/_jsx(FaPlus,{})})})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E23\\u0E32\\u0E22\\u0E44\\u0E14\\u0E49 (\\u0E25\\u0E1A.)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(item.totalRevenue.raw)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:formatNumber(rev+rev*(growth/100))})});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E32\\u0E23\\u0E40\\u0E15\\u0E34\\u0E1A\\u0E42\\u0E15\\u0E02\\u0E2D\\u0E07\\u0E23\\u0E32\\u0E22\\u0E44\\u0E14\\u0E49 (%)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){var revGrowth;if(index!==0){var _incomeStatementHisto;revGrowth=\"\\n                        \".concat(Math.round(((item===null||item===void 0?void 0:item.totalRevenue.raw)/((_incomeStatementHisto=incomeStatementHistory[index-1])===null||_incomeStatementHisto===void 0?void 0:_incomeStatementHisto.totalRevenue.raw)-1)*100*100)/100);}else{revGrowth=\"-\";}return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:revGrowth});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".growthRevEl\"))),{},{className:\"text-center form-control m-auto py-0\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E2D\\u0E31\\u0E15\\u0E23\\u0E32\\u0E01\\u0E33\\u0E44\\u0E23\\u0E2A\\u0E38\\u0E17\\u0E18\\u0E34 (%)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:Math.round(item.netIncome.raw/item.totalRevenue.raw*100*100)/100});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".pNpmEl\"))),{},{className:\"text-center form-control m-auto py-0\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E33\\u0E44\\u0E23\\u0E2A\\u0E38\\u0E17\\u0E18\\u0E34 (\\u0E25\\u0E1A.)\"}),quoteSummary?incomeStatementHistory.map(function(item){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(item.netIncome.raw)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));var pNpm=watch(\"predict.\".concat(index,\".pNpmEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:pNpm?formatNumber((rev+rev*(growth/100))*(pNpm/100)):\"\"})});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-nowrap\",children:\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19\\u0E2B\\u0E38\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48\\u0E08\\u0E14\\u0E17\\u0E30\\u0E40\\u0E1A\\u0E35\\u0E22\\u0E19 (\\u0E25\\u0E49\\u0E32\\u0E19\\u0E2B\\u0E38\\u0E49\\u0E19)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:formatNumber(quoteSummary.defaultKeyStatistics.sharesOutstanding.raw)});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".totalSharesEl\"))),{},{className:\"text-center form-control m-auto py-0\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E01\\u0E33\\u0E44\\u0E23\\u0E15\\u0E48\\u0E2D\\u0E2B\\u0E38\\u0E49\\u0E19 (\\u0E1A\\u0E32\\u0E17)\"}),quoteSummary?incomeStatementHistory.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:(+item.netIncome.raw/+quoteSummary.defaultKeyStatistics.sharesOutstanding.raw).toFixed(2)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));var pNpm=watch(\"predict.\".concat(index,\".pNpmEl\"));var shares=watch(\"predict.\".concat(index,\".totalSharesEl\"));return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:shares?formatNumber((rev+rev*(growth/100))*(pNpm/100)/shares):\"\"})});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"P/E\"}),quoteSummary?incomeStatementHistory.map(function(item,index){var _getPrice$index;var eps=+item.netIncome.raw/+quoteSummary.defaultKeyStatistics.sharesOutstanding.raw;var price=getPrice?(_getPrice$index=getPrice[index])===null||_getPrice$index===void 0?void 0:_getPrice$index.price:0;return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:(price/eps).toFixed(2)});}):\"\",fields.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({style:{width:\"100px\"},type:\"number\"},register(\"predict.\".concat(index,\".peEl\"))),{},{className:\"text-center form-control m-auto py-0\"}))});})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\\u0E23\\u0E32\\u0E04\\u0E32\\u0E2B\\u0E38\\u0E49\\u0E19 (\\u0E1A\\u0E32\\u0E17)\"}),initQuoteSpark?getPrice.map(function(item,index){return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:item.price.toFixed(2)});}):\"\",fields.map(function(item,index){var rev=watch(\"predict.\".concat(index,\".revenueEl\"));var growth=watch(\"predict.\".concat(index,\".growthRevEl\"));var pNpm=watch(\"predict.\".concat(index,\".pNpmEl\"));var shares=watch(\"predict.\".concat(index,\".totalSharesEl\"));var pe=watch(\"predict.\".concat(index,\".peEl\"));var eps=formatNumber((rev+rev*(growth/100))*(pNpm/100)/shares);return/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"div\",{children:shares?(pe*eps).toFixed(2):\"\"})});})]})]})]})});return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid \",children:quoteSummary?displayTable2:\"\"});};export default Table;","map":{"version":3,"sources":["C:/Users/narut/Documents/Coding/stock-calc/src/Component/Table.js"],"names":["React","useState","useEffect","useForm","useFieldArray","Controller","useWatch","FaTimesCircle","FaPlus","Table","quoteSummary","initQuoteSpark","setFairValue","growth","setGrowth","npm","setNpm","totalShares","setTotalShares","incomeStatementHistory","reverse","balanceSheetStatements","balanceSheetHistory","revenue","totalRevenue","raw","styles","tableHeader","backgroundColor","defaultValues","predict","revenueEl","growthRevEl","pNpmEl","npmEl","totalSharesEl","epsEl","register","control","handleSubmit","reset","watch","setValue","getValues","name","fields","append","prepend","remove","swap","move","insert","replace","formatNumber","data","Math","round","toString","convertDate","value","result","Date","date","getDate","month","getMonth","year","getFullYear","getYear","lastRev","length","lastGrowth","lastPNpm","lastShares","lastPe","lastEps","lastPrice","getPrice","timestamp","map","item","index","price","close","filter","startsWith","displayTable2","width","overflowX","endDate","cursor","rev","revGrowth","netIncome","pNpm","defaultKeyStatistics","sharesOutstanding","toFixed","shares","eps","pe"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useForm, useFieldArray, Controller, useWatch } from \"react-hook-form\";\r\nimport { FaTimesCircle, FaPlus } from \"react-icons/fa\";\r\n\r\nconst Table = ({ quoteSummary, initQuoteSpark, setFairValue }) => {\r\n  const [growth, setGrowth] = useState(0);\r\n  const [npm, setNpm] = useState(0);\r\n  const [totalShares, setTotalShares] = useState(0);\r\n  const incomeStatementHistory = quoteSummary\r\n    ? [\r\n        ...quoteSummary?.incomeStatementHistory?.incomeStatementHistory,\r\n      ]?.reverse()\r\n    : [];\r\n\r\n  const balanceSheetStatements = quoteSummary\r\n    ? [...quoteSummary?.balanceSheetHistory?.balanceSheetStatements]?.reverse()\r\n    : [];\r\n\r\n  const revenue =\r\n    quoteSummary?.incomeStatementHistory?.incomeStatementHistory[0]\r\n      ?.totalRevenue.raw +\r\n    quoteSummary?.incomeStatementHistory?.incomeStatementHistory[0]\r\n      ?.totalRevenue.raw *\r\n      (growth / 100);\r\n\r\n  const styles = {\r\n    tableHeader: {\r\n      backgroundColor: \"rgba(227, 242, 253, 1)\",\r\n    },\r\n  };\r\n\r\n  const defaultValues = {\r\n    predict: [\r\n      {\r\n        revenueEl: revenue,\r\n        growthRevEl: 0,\r\n        pNpmEl: 0,\r\n        npmEl: 0,\r\n        totalSharesEl: 0,\r\n        epsEl: 0,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const { register, control, handleSubmit, reset, watch, setValue, getValues } =\r\n    useForm();\r\n\r\n  const { fields, append, prepend, remove, swap, move, insert, replace } =\r\n    useFieldArray({\r\n      control,\r\n      name: \"predict\",\r\n    });\r\n\r\n  const formatNumber = (data) => {\r\n    return (Math.round((data / 1000000) * 100) / 100)\r\n      .toString()\r\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  };\r\n\r\n  const convertDate = (value) => {\r\n    const result = new Date(value * 1000);\r\n\r\n    let date = result.getDate();\r\n    let month = result.getMonth() + 1;\r\n    let year = result.getFullYear();\r\n\r\n    if (date < 10) {\r\n      date = \"0\" + date;\r\n    }\r\n    if (month < 10) {\r\n      month = \"0\" + month;\r\n    }\r\n\r\n    return `${date}/${month}/${year}`;\r\n  };\r\n\r\n  const getYear = (value) => {\r\n    const result = new Date(value * 1000);\r\n\r\n    let year = result.getFullYear();\r\n\r\n    return year;\r\n  };\r\n\r\n  const lastRev = watch(`predict.${fields.length - 1}.revenueEl`);\r\n  const lastGrowth = watch(`predict.${fields.length - 1}.growthRevEl`);\r\n  const lastPNpm = watch(`predict.${fields.length - 1}.pNpmEl`);\r\n  const lastShares = watch(`predict.${fields.length - 1}.totalSharesEl`);\r\n  const lastPe = watch(`predict.${fields.length - 1}.peEl`);\r\n  const lastEps = formatNumber(\r\n    ((lastRev + lastRev * (lastGrowth / 100)) * (lastPNpm / 100)) / lastShares\r\n  );\r\n\r\n  const lastPrice = lastPe * lastEps;\r\n\r\n  useEffect(() => {\r\n    setFairValue(lastPrice);\r\n  }, [lastPrice]);\r\n\r\n  useEffect(() => {\r\n    if (quoteSummary) reset(defaultValues);\r\n  }, [quoteSummary]);\r\n\r\n  const getPrice = initQuoteSpark?.timestamp\r\n    ?.map((item, index) => {\r\n      return {\r\n        date: convertDate(item),\r\n        year: getYear(item),\r\n        price: initQuoteSpark.close[index],\r\n      };\r\n    })\r\n    .filter(\r\n      (item) =>\r\n        item.date.startsWith(\"01/12\") &&\r\n        item.year >= new Date().getFullYear() - 4\r\n    );\r\n\r\n  const displayTable2 = (\r\n    <div style={{ width: \"100%\", overflowX: \"scroll\" }}>\r\n      <table className=\"table table-sm\">\r\n        <thead className=\"text-center\" style={styles.tableHeader}>\r\n          <tr>\r\n            <td></td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td key={item.endDate.raw}>\r\n                      {new Date(item.endDate.raw * 1000).getFullYear()}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"-\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td>\r\n                  {new Date().getFullYear() + index}{\" \"}\r\n                  {index !== 0 ? (\r\n                    <span\r\n                      className=\"float-end\"\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={() => remove(index)}\r\n                    >\r\n                      <FaTimesCircle />\r\n                    </span>\r\n                  ) : (\r\n                    \"\"\r\n                  )}\r\n                </td>\r\n              );\r\n            })}\r\n            <td>\r\n              <div\r\n                type=\"button\"\r\n                className=\"btn btn-outline-primary btn-sm\"\r\n                onClick={() => {\r\n                  append({\r\n                    revenueEl: lastRev + lastRev * (lastGrowth / 100),\r\n                    growthRevEl: 0,\r\n                    pNpmEl: 0,\r\n                    npmEl: 0,\r\n                    totalSharesEl: 0,\r\n                    epsEl: 0,\r\n                  });\r\n                }}\r\n              >\r\n                <FaPlus />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>รายได้ (ลบ.)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(item.totalRevenue.raw)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>{formatNumber(rev + rev * (growth / 100))}</div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>การเติบโตของรายได้ (%)</td>\r\n\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  let revGrowth;\r\n                  if (index !== 0) {\r\n                    revGrowth = `\r\n                        ${\r\n                          Math.round(\r\n                            (item?.totalRevenue.raw /\r\n                              incomeStatementHistory[index - 1]?.totalRevenue\r\n                                .raw -\r\n                              1) *\r\n                              100 *\r\n                              100\r\n                          ) / 100\r\n                        }`;\r\n                  } else {\r\n                    revGrowth = \"-\";\r\n                  }\r\n\r\n                  return <td className=\"text-center\">{revGrowth}</td>;\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.growthRevEl`)}\r\n                    className=\"text-center form-control m-auto py-0\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n\r\n          <tr>\r\n            <td>อัตรากำไรสุทธิ (%)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {Math.round(\r\n                        (item.netIncome.raw / item.totalRevenue.raw) * 100 * 100\r\n                      ) / 100}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.pNpmEl`)}\r\n                    className=\"text-center form-control m-auto py-0\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>กำไรสุทธิ (ลบ.)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(item.netIncome.raw)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n              const pNpm = watch(`predict.${index}.pNpmEl`);\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>\r\n                    {pNpm\r\n                      ? formatNumber(\r\n                          (rev + rev * (growth / 100)) * (pNpm / 100)\r\n                        )\r\n                      : \"\"}\r\n                  </div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td className=\"text-nowrap\">จำนวนหุ้นที่จดทะเบียน (ล้านหุ้น)</td>\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {formatNumber(\r\n                        quoteSummary.defaultKeyStatistics.sharesOutstanding.raw\r\n                      )}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.totalSharesEl`)}\r\n                    className=\"text-center form-control m-auto py-0\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>กำไรต่อหุ้น (บาท)</td>\r\n\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  return (\r\n                    <td className=\"text-center\">\r\n                      {(\r\n                        +item.netIncome.raw /\r\n                        +quoteSummary.defaultKeyStatistics.sharesOutstanding.raw\r\n                      ).toFixed(2)}\r\n                    </td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n              const pNpm = watch(`predict.${index}.pNpmEl`);\r\n              const shares = watch(`predict.${index}.totalSharesEl`);\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>\r\n                    {shares\r\n                      ? formatNumber(\r\n                          ((rev + rev * (growth / 100)) * (pNpm / 100)) / shares\r\n                        )\r\n                      : \"\"}\r\n                  </div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>P/E</td>\r\n\r\n            {quoteSummary\r\n              ? incomeStatementHistory.map((item, index) => {\r\n                  const eps =\r\n                    +item.netIncome.raw /\r\n                    +quoteSummary.defaultKeyStatistics.sharesOutstanding.raw;\r\n\r\n                  const price = getPrice ? getPrice[index]?.price : 0;\r\n                  return (\r\n                    <td className=\"text-center\">{(price / eps).toFixed(2)}</td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <input\r\n                    style={{ width: \"100px\" }}\r\n                    type=\"number\"\r\n                    {...register(`predict.${index}.peEl`)}\r\n                    className=\"text-center form-control m-auto py-0\"\r\n                  />\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n          <tr>\r\n            <td>ราคาหุ้น (บาท)</td>\r\n\r\n            {initQuoteSpark\r\n              ? getPrice.map((item, index) => {\r\n                  return (\r\n                    <td className=\"text-center\">{item.price.toFixed(2)}</td>\r\n                  );\r\n                })\r\n              : \"\"}\r\n\r\n            {fields.map((item, index) => {\r\n              const rev = watch(`predict.${index}.revenueEl`);\r\n              const growth = watch(`predict.${index}.growthRevEl`);\r\n              const pNpm = watch(`predict.${index}.pNpmEl`);\r\n              const shares = watch(`predict.${index}.totalSharesEl`);\r\n              const pe = watch(`predict.${index}.peEl`);\r\n              const eps = formatNumber(\r\n                ((rev + rev * (growth / 100)) * (pNpm / 100)) / shares\r\n              );\r\n              return (\r\n                <td className=\"text-center\">\r\n                  <div>{shares ? (pe * eps).toFixed(2) : \"\"}</div>\r\n                </td>\r\n              );\r\n            })}\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container-fluid \">{quoteSummary ? displayTable2 : \"\"}</div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n"]},"metadata":{},"sourceType":"module"}