{"ast":null,"code":"import _slicedToArray from\"C:/Users/narut/Documents/Coding/stock-calc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect}from\"react\";import{yahooFinApi}from\"../API/yahooFinApi\";import{useToasts}from\"react-toast-notifications\";import{jsx as _jsx}from\"react/jsx-runtime\";var Navbar=function Navbar(_ref){var setQuoteSummary=_ref.setQuoteSummary,setQuoteSpark=_ref.setQuoteSpark,rangeChart=_ref.rangeChart,quoteSummary=_ref.quoteSummary;var _useToasts=useToasts(),addToast=_useToasts.addToast;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var onHandleSearch=function onHandleSearch(ev){setSearchTerm(ev.target.value);};var fetchChartData=function fetchChartData(){yahooFinApi.get(\"/v8/finance/spark?interval=1d&range=\".concat(rangeChart,\"&symbols=\").concat(searchTerm.toLowerCase(),\".BK\")).then(function(res){var firstObj=res.data[Object.keys(res.data)[0]];setQuoteSpark(firstObj);}).catch(function(err){console.log(\"err\",err.message);});};var onHandleSubmit=function onHandleSubmit(ev){ev.preventDefault();yahooFinApi.get(\"/v11/finance/quoteSummary/\".concat(searchTerm.toLowerCase(),\".BK?lang=en&region=US&modules=defaultKeyStatistics%2CassetProfile%2CfinancialData%2CquoteType%2CsummaryDetail%2CbalanceSheetHistory%2CincomeStatementHistory\")).then(function(res){if(res.data.quoteSummary.result){setQuoteSummary(res.data);}else{addToast(res.data.quoteSummary.error.code,{appearance:\"error\",autoDismiss:true});}}).catch(function(err){console.log(\"err\",err.message);});fetchChartData();};useLayoutEffect(function(){if(searchTerm)fetchChartData();},[rangeChart,quoteSummary]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-light bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"form\",{className:\"d-flex\",onSubmit:onHandleSubmit,children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",type:\"search\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E2B\\u0E38\\u0E49\\u0E19\",onChange:onHandleSearch,value:searchTerm})})})})});};export default Navbar;","map":{"version":3,"sources":["C:/Users/narut/Documents/Coding/stock-calc/src/Component/Navbar.js"],"names":["React","useState","useLayoutEffect","yahooFinApi","useToasts","Navbar","setQuoteSummary","setQuoteSpark","rangeChart","quoteSummary","addToast","searchTerm","setSearchTerm","onHandleSearch","ev","target","value","fetchChartData","get","toLowerCase","then","res","firstObj","data","Object","keys","catch","err","console","log","message","onHandleSubmit","preventDefault","result","error","code","appearance","autoDismiss"],"mappings":"iKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,eAA1B,KAAiD,OAAjD,CACA,OAASC,WAAT,KAA4B,oBAA5B,CACA,OAASC,SAAT,KAA0B,2BAA1B,C,2CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAKT,IAJJC,CAAAA,eAII,MAJJA,eAII,CAHJC,aAGI,MAHJA,aAGI,CAFJC,UAEI,MAFJA,UAEI,CADJC,YACI,MADJA,YACI,CACJ,eAAqBL,SAAS,EAA9B,CAAQM,QAAR,YAAQA,QAAR,CACA,cAAoCT,QAAQ,CAAC,EAAD,CAA5C,wCAAOU,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,EAAD,CAAQ,CAC7BF,aAAa,CAACE,EAAE,CAACC,MAAH,CAAUC,KAAX,CAAb,CACD,CAFD,CAIA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3Bd,WAAW,CACRe,GADH,+CAE2CV,UAF3C,qBAEiEG,UAAU,CAACQ,WAAX,EAFjE,SAIGC,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,GAAMC,CAAAA,QAAQ,CAAGD,GAAG,CAACE,IAAJ,CAASC,MAAM,CAACC,IAAP,CAAYJ,GAAG,CAACE,IAAhB,EAAsB,CAAtB,CAAT,CAAjB,CACAhB,aAAa,CAACe,QAAD,CAAb,CACD,CAPH,EAQGI,KARH,CAQS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,GAAG,CAACG,OAAvB,EACD,CAVH,EAWD,CAZD,CAcA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACjB,EAAD,CAAQ,CAC7BA,EAAE,CAACkB,cAAH,GACA7B,WAAW,CACRe,GADH,qCAEiCP,UAAU,CAACQ,WAAX,EAFjC,kKAIGC,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACE,IAAJ,CAASd,YAAT,CAAsBwB,MAA1B,CAAkC,CAChC3B,eAAe,CAACe,GAAG,CAACE,IAAL,CAAf,CACD,CAFD,IAEO,CACLb,QAAQ,CAACW,GAAG,CAACE,IAAJ,CAASd,YAAT,CAAsByB,KAAtB,CAA4BC,IAA7B,CAAmC,CACzCC,UAAU,CAAE,OAD6B,CAEzCC,WAAW,CAAE,IAF4B,CAAnC,CAAR,CAID,CACF,CAbH,EAcGX,KAdH,CAcS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,GAAG,CAACG,OAAvB,EACD,CAhBH,EAkBAb,cAAc,GACf,CArBD,CAuBAf,eAAe,CAAC,UAAM,CACpB,GAAIS,UAAJ,CAAgBM,cAAc,GAC/B,CAFc,CAEZ,CAACT,UAAD,CAAaC,YAAb,CAFY,CAAf,CAIA,mBACE,kCACE,YAAK,SAAS,CAAC,8BAAf,uBACE,YAAK,SAAS,CAAC,iBAAf,uBACE,aAAM,SAAS,CAAC,QAAhB,CAAyB,QAAQ,CAAEsB,cAAnC,uBACE,cACE,SAAS,CAAC,mBADZ,CAEE,IAAI,CAAC,QAFP,CAGE,WAAW,CAAC,kGAHd,CAIE,QAAQ,CAAElB,cAJZ,CAKE,KAAK,CAAEF,UALT,EADF,EADF,EADF,EADF,EADF,CAiBD,CAvED,CAyEA,cAAeN,CAAAA,MAAf","sourcesContent":["import React, { useState, useLayoutEffect } from \"react\";\r\nimport { yahooFinApi } from \"../API/yahooFinApi\";\r\nimport { useToasts } from \"react-toast-notifications\";\r\n\r\nconst Navbar = ({\r\n  setQuoteSummary,\r\n  setQuoteSpark,\r\n  rangeChart,\r\n  quoteSummary,\r\n}) => {\r\n  const { addToast } = useToasts();\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  const onHandleSearch = (ev) => {\r\n    setSearchTerm(ev.target.value);\r\n  };\r\n\r\n  const fetchChartData = () => {\r\n    yahooFinApi\r\n      .get(\r\n        `/v8/finance/spark?interval=1d&range=${rangeChart}&symbols=${searchTerm.toLowerCase()}.BK`\r\n      )\r\n      .then((res) => {\r\n        const firstObj = res.data[Object.keys(res.data)[0]];\r\n        setQuoteSpark(firstObj);\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err.message);\r\n      });\r\n  };\r\n\r\n  const onHandleSubmit = (ev) => {\r\n    ev.preventDefault();\r\n    yahooFinApi\r\n      .get(\r\n        `/v11/finance/quoteSummary/${searchTerm.toLowerCase()}.BK?lang=en&region=US&modules=defaultKeyStatistics%2CassetProfile%2CfinancialData%2CquoteType%2CsummaryDetail%2CbalanceSheetHistory%2CincomeStatementHistory`\r\n      )\r\n      .then((res) => {\r\n        if (res.data.quoteSummary.result) {\r\n          setQuoteSummary(res.data);\r\n        } else {\r\n          addToast(res.data.quoteSummary.error.code, {\r\n            appearance: \"error\",\r\n            autoDismiss: true,\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"err\", err.message);\r\n      });\r\n\r\n    fetchChartData();\r\n  };\r\n\r\n  useLayoutEffect(() => {\r\n    if (searchTerm) fetchChartData();\r\n  }, [rangeChart, quoteSummary]);\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-light bg-light\">\r\n        <div className=\"container-fluid\">\r\n          <form className=\"d-flex\" onSubmit={onHandleSubmit}>\r\n            <input\r\n              className=\"form-control me-2\"\r\n              type=\"search\"\r\n              placeholder=\"ค้นหารายชื่อหุ้น\"\r\n              onChange={onHandleSearch}\r\n              value={searchTerm}\r\n            />\r\n          </form>\r\n        </div>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n"]},"metadata":{},"sourceType":"module"}